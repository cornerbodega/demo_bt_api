<div class="pnGrey">
    <!-- Remove log in buttons if user is logged in -->
    <pn-splash-header />

    <div class="container">

        <div ><span class=" pnText pnTitleText" ng-click="toForum()">Forum&nbsp;&nbsp;</span><i class="fa fa-chevron-right"></i><span class=" pnText pnTitleText" ng-click="toForumCategory(category)">&nbsp;&nbsp;{{category.label}}</span></div>
        <pnlp />

        <div class="pnSmallTitleText">
            {{topic.subject}}
        </div>
        <pnlp />
        <div ng-show="!posts">
            <md-progress-linear md-mode="indeterminate"></md-progress-linear>
        </div>
        <div ng-repeat="post in posts">
            <div style="border-top: 1px dotted #8c8b8b;">

            </div>
            <pnlp />

            <div ng-show="post.deleted == 1">

                <div layout='row' ng-if="iAmOwner(post)">
                    <div flex></div>
                    <div ng-show="post.deleted == 1" ng-click="undoDelete(post)">
                        <i class="fa fa-undo"></i> Undo Delete
                    </div>
                </div>
                <div layout="row" flex>
                    <div flex="15">
                        <!-- User Info -->
                        <!-- Post DateTime -->
                        <div class="">
                            [deleted]
                        </div>
                        <pnlp />
                        <div class="">
                            {{post.at * 1000| timeAgo}}
                            <!-- {{post.at}} -->
                            <!-- {{post.atTimeString}} -->
                        </div>
                    </div>
                    <div flex="20">

                    </div>
                    <!-- Post Content (formatted!) -->
                    <div class="">
                        [deleted]
                    </div>
                </div>
            </div>
            <!-- {{post.deleted}} -->


            <span ng-hide="post.deleted == 1" >
                <div layout="row" ng-if="iAmOwner(post)">
                    <div flex></div>
                    <div ng-click="editPost(post)">
                        <i class="fa fa-edit"></i>

                    </div>
                    <pnlp />
                    <div ng-click="deletePost(post)">
                        <i class="fa fa-remove"></i>

                    </div>
                </div>
            </span>

            <div ng-hide="post.deleted == 1" layout="row" flex>
                <div flex="15">
                    <!-- User Info -->
                    <!-- Post DateTime -->
                    <div class="">
                        {{post.userFullName}}
                    </div>
                    <pnlp />
                    <div class="">
                        {{post.companyName}}
                    </div>
                    <pnlp />
                    <div class="">
                        {{post.at * 1000| timeAgo}}
                        <!-- {{post.at}} -->
                        <!-- {{post.atTimeString}} -->
                    </div>
                    <div ng-show="post.edited == 1">
                        <i>edited*</i>
                    </div>
                </div>
                <div flex="20">

                </div>
                <!-- Post Content (formatted!) -->
                <div ng-hide="showEdit[post.post_order]" class="" ks-nl2br ks-bbcode>
                    {{post.content}}
                </div>
                <div ng-show="showEdit[post.post_order]">
                    <pnlp />

                    <div layout="row">
                        <div class="">
                            Edit:
                        </div>
                        <div flex>

                        </div>
                        <div ng-click="openFormattingHelp($event)">
                            <u>Formatting Help</u>
                        </div>
                    </div>
                    <pnlp />

                    <textarea class="white" name="name" rows="8" cols="80" ng-model="post.content"></textarea>
                    <pn-forum-edit-post-buttons />

                </div>
            </div>
            <pnlp />

        </div>

        <pnlp />
        <div style="border-top: 1px dotted #8c8b8b;">

        <md-button ng-hide="isLoggedIn" ng-click="toLogin()">Reply</md-button>
        <pnlp />
        <div layout="row" ng-show="isLoggedIn" flex>
            <div flex="15">
                <!-- User Info -->
                <!-- Post DateTime -->
                <div class="">
                    {{myFullName}}
                </div>
                <pnlp />
                <div class="">
                    {{myCompanyName}}
                </div>
            </div>
            <div flex="20">

            </div>
            <!-- Post Content (formatted!) -->

            <!-- Text Area -->
            <div flex>
                <div layout="row">
                    <div class="">
                        Reply:
                    </div>
                    <div flex></div>
                    <div ng-click="openFormattingHelp($event)">
                        <u>Formatting Help</u>
                    </div>
                </div>
                <pnlp />
                <div class="">
                    <textarea  class="white" style="height:100px;" ng-model="newPost">
                    </textarea >
                </div>

                <pn-forum-post-buttons />
            </div>

        </div>
        <pnlp />

    </div>
</div>

<pn-footer />
